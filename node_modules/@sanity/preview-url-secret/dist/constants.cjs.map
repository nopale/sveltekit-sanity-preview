{"version":3,"file":"constants.cjs","sources":["../src/constants.ts"],"sourcesContent":["import type {\n  PreviewUrlSecretSchemaIdPrefix,\n  PreviewUrlSecretSchemaType,\n  PreviewUrlSecretSchemaTypeSingleton,\n} from './types'\n\n/** @internal */\nexport const schemaType = 'sanity.previewUrlSecret' satisfies PreviewUrlSecretSchemaType\n\n/** @internal */\nexport const schemaIdPrefix = 'sanity-preview-url-secret' satisfies PreviewUrlSecretSchemaIdPrefix\n\n/** @internal */\nexport const schemaIdSingleton = `${schemaIdPrefix}.share-access` as const\n\n/** @internal */\nexport const schemaTypeSingleton =\n  'sanity.previewUrlShareAccess' satisfies PreviewUrlSecretSchemaTypeSingleton\n\n/** @internal */\nexport const apiVersion = '2023-11-09'\n\n/** @internal */\nexport const urlSearchParamPreviewSecret = 'sanity-preview-secret'\n\n/** @internal */\nexport const urlSearchParamPreviewPathname = 'sanity-preview-pathname'\n\n/** @internal */\nexport const urlSearchParamPreviewPerspective = 'sanity-preview-perspective'\n\n/** @internal */\nexport const isDev = process.env.NODE_ENV === 'development'\n\n/**\n * updated within the hour, if it's older it'll create a new secret or return null\n * @internal\n */\nexport const SECRET_TTL = 60 * 60\n\n/** @internal */\nexport const fetchSecretQuery =\n  /* groq */ `*[_type == \"${schemaType}\" && secret == $secret && dateTime(_updatedAt) > dateTime(now()) - ${SECRET_TTL}][0]{\n    _id,\n    _updatedAt,\n    secret,\n    studioUrl,\n  }` as const\n\n/** @internal */\nexport const fetchSharedAccessQuery =\n  /* groq */ `*[_id == \"${schemaIdSingleton}\" && _type == \"${schemaTypeSingleton}\"][0].secret` as const\n\n/** @internal */\nexport const fetchSharedAccessSecretQuery =\n  /* groq */ `*[_id == \"${schemaIdSingleton}\" && _type == \"${schemaTypeSingleton}\" && secret == $secret][0]{\n  secret,\n  studioUrl,\n}` as const\n\n/** @internal */\nexport const deleteExpiredSecretsQuery =\n  /* groq */ `*[_type == \"${schemaType}\" && dateTime(_updatedAt) <= dateTime(now()) - ${SECRET_TTL}]` as const\n\n/**\n * Used for tagging `client.fetch` queries\n * @internal\n */\nexport const tag = 'sanity.preview-url-secret' as const\n\n/** @internal */\nexport const perspectiveCookieName = 'sanity-preview-perspective'\n"],"names":[],"mappings":";;AAOa,MAAA,aAAa,2BAGb,iBAAiB,6BAGjB,oBAAoB,GAAG,cAAc,iBAGrC,sBACX,gCAGW,aAAa,cAGb,8BAA8B,yBAG9B,gCAAgC,2BAGhC,mCAAmC,8BAGnC,QAAQ,QAAQ,IAAI,aAAa,eAMjC,aAAa,KAAK,IAGlB;AAAA;AAAA,EACA,eAAe,UAAU,sEAAsE,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAQzG;AAAA;AAAA,EACA,aAAa,iBAAiB,kBAAkB,mBAAmB;AAAA,GAGnE;AAAA;AAAA,EACA,aAAa,iBAAiB,kBAAkB,mBAAmB;AAAA;AAAA;AAAA;AAAA,GAMnE;AAAA;AAAA,EACA,eAAe,UAAU,kDAAkD,UAAU;AAAA,GAMrF,MAAM,6BAGN,wBAAwB;;;;;;;;;;;;;;;;;"}