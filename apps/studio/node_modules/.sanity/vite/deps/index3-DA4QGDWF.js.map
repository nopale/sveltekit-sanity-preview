{
  "version": 3,
  "sources": ["../../../../../../node_modules/sanity/src/structure/components/paneRouter/PaneRouterProvider.tsx", "../../../../../../node_modules/sanity/src/structure/structureResolvers/PaneResolutionError.ts", "../../../../../../node_modules/sanity/src/structure/structureResolvers/assignId.ts", "../../../../../../node_modules/sanity/src/structure/structureResolvers/createPaneResolver.ts", "../../../../../../node_modules/sanity/src/structure/structureResolvers/memoBind.ts", "../../../../../../node_modules/sanity/src/structure/structureResolvers/resolveIntent.ts", "../../../../../../node_modules/sanity/src/structure/structureResolvers/createResolvedPaneNodeStream.ts", "../../../../../../node_modules/sanity/src/structure/structureResolvers/useResolvedPanes.ts", "../../../../../../node_modules/sanity/src/structure/components/structureTool/intentResolver/utils.ts", "../../../../../../node_modules/sanity/src/structure/components/structureTool/intentResolver/IntentResolver.tsx", "../../../../../../node_modules/sanity/src/structure/components/structureTool/StructureError.tsx", "../../../../../../node_modules/sanity/src/structure/panes/unknown/UnknownPaneType.tsx", "../../../../../../node_modules/sanity/src/structure/panes/StructureToolPane.tsx", "../../../../../../node_modules/sanity/src/structure/components/structureTool/NoDocumentTypesScreen.tsx", "../../../../../../node_modules/sanity/src/structure/components/structureTool/StructureTitle.tsx", "../../../../../../node_modules/sanity/src/structure/components/structureTool/StructureTool.tsx", "../../../../../../node_modules/sanity/src/structure/components/structureTool/StructureToolBoundary.tsx"],
  "sourcesContent": ["import {toString as pathToString} from '@sanity/util/paths'\nimport {omit} from 'lodash'\nimport {type ReactNode, useCallback, useMemo} from 'react'\nimport {PaneRouterContext} from 'sanity/_singletons'\nimport {useRouter, useRouterState} from 'sanity/router'\n\nimport {type RouterPaneGroup, type RouterPanes, type RouterPaneSibling} from '../../types'\nimport {usePaneLayout} from '../pane/usePaneLayout'\nimport {BackLink} from './BackLink'\nimport {ChildLink} from './ChildLink'\nimport {ParameterizedLink} from './ParameterizedLink'\nimport {ReferenceChildLink} from './ReferenceChildLink'\nimport {type PaneRouterContextValue} from './types'\n\nconst emptyArray: never[] = []\n\n/**\n * @internal\n */\nexport function PaneRouterProvider(props: {\n  children: ReactNode\n  flatIndex: number\n  index: number\n  params: Record<string, string | undefined>\n  payload: unknown\n  siblingIndex: number\n}) {\n  const {children, flatIndex, index, params, payload, siblingIndex} = props\n  const {navigate, navigateIntent, resolvePathFromState} = useRouter()\n  const routerState = useRouterState()\n  const {panes, expand} = usePaneLayout()\n  const routerPaneGroups: RouterPaneGroup[] = useMemo(\n    () => (routerState?.panes || emptyArray) as RouterPanes,\n    [routerState?.panes],\n  )\n  const lastPane = useMemo(() => panes?.[panes.length - 2], [panes])\n\n  const groupIndex = index - 1\n\n  const createNextRouterState = useCallback(\n    (modifier: (siblings: RouterPaneGroup, item: RouterPaneSibling) => RouterPaneGroup) => {\n      const currentGroup = routerPaneGroups[groupIndex] || []\n      const currentItem = currentGroup[siblingIndex]\n      const nextGroup = modifier(currentGroup, currentItem)\n      const nextPanes = [\n        ...routerPaneGroups.slice(0, groupIndex),\n        nextGroup,\n        ...routerPaneGroups.slice(groupIndex + 1),\n      ]\n      const nextRouterState = {...(routerState || {}), panes: nextPanes}\n\n      return nextRouterState\n    },\n    [groupIndex, routerPaneGroups, routerState, siblingIndex],\n  )\n\n  const modifyCurrentGroup = useCallback(\n    (modifier: (siblings: RouterPaneGroup, item: RouterPaneSibling) => RouterPaneGroup) => {\n      const nextRouterState = createNextRouterState(modifier)\n      setTimeout(() => navigate(nextRouterState), 0)\n      return nextRouterState\n    },\n    [createNextRouterState, navigate],\n  )\n\n  const createPathWithParams: PaneRouterContextValue['createPathWithParams'] = useCallback(\n    (nextParams) => {\n      const nextRouterState = createNextRouterState((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, params: nextParams},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n\n      return resolvePathFromState(nextRouterState)\n    },\n    [createNextRouterState, resolvePathFromState, siblingIndex],\n  )\n\n  const setPayload: PaneRouterContextValue['setPayload'] = useCallback(\n    (nextPayload) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, payload: nextPayload},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex],\n  )\n\n  const setParams: PaneRouterContextValue['setParams'] = useCallback(\n    (nextParams) => {\n      modifyCurrentGroup((siblings, item) => [\n        ...siblings.slice(0, siblingIndex),\n        {...item, params: nextParams},\n        ...siblings.slice(siblingIndex + 1),\n      ])\n    },\n    [modifyCurrentGroup, siblingIndex],\n  )\n\n  const handleEditReference: PaneRouterContextValue['handleEditReference'] = useCallback(\n    ({id, parentRefPath, type, template}) => {\n      navigate({\n        panes: [\n          ...routerPaneGroups.slice(0, groupIndex + 1),\n          [\n            {\n              id,\n              params: {template: template.id, parentRefPath: pathToString(parentRefPath), type},\n              payload: template.params,\n            },\n          ],\n        ],\n      })\n    },\n    [groupIndex, navigate, routerPaneGroups],\n  )\n\n  const ctx: PaneRouterContextValue = useMemo(\n    () => ({\n      // Zero-based index (position) of pane, visually\n      index: flatIndex,\n\n      // Zero-based index of pane group (within URL structure)\n      groupIndex,\n\n      // Zero-based index of pane within sibling group\n      siblingIndex,\n\n      // Payload of the current pane\n      payload,\n\n      // Params of the current pane\n      params,\n\n      // Whether or not the pane has any siblings (within the same group)\n      hasGroupSiblings: routerPaneGroups[groupIndex]\n        ? routerPaneGroups[groupIndex].length > 1\n        : false,\n\n      // The length of the current group\n      groupLength: routerPaneGroups[groupIndex] ? routerPaneGroups[groupIndex].length : 0,\n\n      // Current router state for the \"panes\" property\n      routerPanesState: routerPaneGroups,\n\n      // Curried StateLink that passes the correct state automatically\n      ChildLink,\n\n      // Curried StateLink that pops off the last pane group\n      // Only pass if this is not the first pane\n      BackLink: flatIndex ? BackLink : undefined,\n\n      // A specialized `ChildLink` that takes in the needed props to open a\n      // referenced document to the right\n      ReferenceChildLink,\n\n      // Similar to `ReferenceChildLink` expect without the wrapping component\n      handleEditReference,\n\n      // Curried StateLink that passed the correct state, but merges params/payload\n      ParameterizedLink,\n\n      // Replaces the current pane with a new one\n      replaceCurrent: (opts = {}): void => {\n        modifyCurrentGroup(() => [\n          {id: opts.id || '', payload: opts.payload, params: opts.params || {}},\n        ])\n      },\n\n      // Removes the current pane from the group\n      closeCurrent: (): void => {\n        modifyCurrentGroup((siblings, item) =>\n          siblings.length > 1 ? siblings.filter((sibling) => sibling !== item) : siblings,\n        )\n      },\n\n      // Removes all panes to the right including current\n      closeCurrentAndAfter: (expandLast = true): void => {\n        if (expandLast && lastPane) {\n          expand(lastPane.element)\n        }\n        navigate({\n          panes: [...routerPaneGroups.slice(0, groupIndex)],\n        })\n      },\n\n      // Duplicate the current pane, with optional overrides for payload, parameters\n      duplicateCurrent: (options): void => {\n        modifyCurrentGroup((siblings, item) => {\n          const duplicatedItem = {\n            ...item,\n            payload: options?.payload || item.payload,\n            params: options?.params || item.params,\n          }\n\n          return [\n            ...siblings.slice(0, siblingIndex),\n            duplicatedItem,\n            ...siblings.slice(siblingIndex),\n          ]\n        })\n      },\n\n      // Set the view for the current pane\n      setView: (viewId) => {\n        const restParams = omit(params, 'view')\n        return setParams(viewId ? {...restParams, view: viewId} : restParams)\n      },\n\n      // Set the parameters for the current pane\n      setParams,\n\n      // Set the payload for the current pane\n      setPayload,\n\n      // A function that returns a path with the given parameters\n      createPathWithParams,\n\n      // Proxied navigation to a given intent. Consider just exposing `router` instead?\n      navigateIntent,\n    }),\n    [\n      flatIndex,\n      groupIndex,\n      siblingIndex,\n      payload,\n      params,\n      routerPaneGroups,\n      handleEditReference,\n      setParams,\n      setPayload,\n      createPathWithParams,\n      navigateIntent,\n      modifyCurrentGroup,\n      lastPane,\n      navigate,\n      expand,\n    ],\n  )\n\n  return <PaneRouterContext.Provider value={ctx}>{children}</PaneRouterContext.Provider>\n}\n", "import {type RouterPaneSiblingContext} from '../types'\n\nexport interface PaneResolutionErrorOptions {\n  message: string\n  context?: RouterPaneSiblingContext\n  helpId?: string\n  cause?: Error\n}\n\n/**\n * An error thrown during pane resolving. This error is meant to be bubbled up\n * through react and handled in an error boundary. It includes a `cause`\n * property which is the original error caught\n */\nexport class PaneResolutionError extends Error {\n  cause: Error | undefined\n  context: RouterPaneSiblingContext | undefined\n  helpId: string | undefined\n\n  constructor({message, context, helpId, cause}: PaneResolutionErrorOptions) {\n    super(message)\n    this.name = 'PaneResolutionError'\n    this.context = context\n    this.helpId = helpId\n    this.cause = cause\n  }\n}\n", "import {nanoid} from 'nanoid'\n\n// `WeakMap`s require the first type param to extend `object`\n// eslint-disable-next-line @typescript-eslint/ban-types\nconst randomIdCache = new WeakMap<object, string>()\n\n/**\n * given an object, this function randomly generates an ID and returns it. this\n * result is then saved in a WeakMap so subsequent requests for the same object\n * will receive the same ID\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function assignId(obj: object): string {\n  const cachedValue = randomIdCache.get(obj)\n  if (cachedValue) return cachedValue\n\n  const id = nanoid()\n  randomIdCache.set(obj, id)\n  return id\n}\n", "import {from, isObservable, type Observable, of as observableOf} from 'rxjs'\nimport {publishReplay, refCount, switchMap} from 'rxjs/operators'\nimport {isRecord} from 'sanity'\n\nimport {type PaneNode, type RouterPaneSiblingContext, type UnresolvedPaneNode} from '../types'\nimport {PaneResolutionError} from './PaneResolutionError'\n\ninterface Serializable {\n  serialize: (...args: never[]) => unknown\n}\n\nconst isPromise = (thing: any): thing is PromiseLike<unknown> => {\n  return !!thing && typeof thing?.then === 'function'\n}\nconst isSerializable = (thing: unknown): thing is Serializable => {\n  if (!isRecord(thing)) return false\n  return typeof thing.serialize === 'function'\n}\n\n/**\n * The signature of the function used to take an `UnresolvedPaneNode` and turn\n * it into an `Observable<PaneNode>`.\n */\nexport type PaneResolver = (\n  unresolvedPane: UnresolvedPaneNode | undefined,\n  context: RouterPaneSiblingContext,\n  flatIndex: number,\n) => Observable<PaneNode>\n\nexport type PaneResolverMiddleware = (paneResolveFn: PaneResolver) => PaneResolver\n\nconst rethrowWithPaneResolutionErrors: PaneResolverMiddleware =\n  (next) => (unresolvedPane, context, flatIndex) => {\n    try {\n      return next(unresolvedPane, context, flatIndex)\n    } catch (e) {\n      // re-throw errors that are already `PaneResolutionError`s\n      if (e instanceof PaneResolutionError) {\n        throw e\n      }\n\n      // anything else, wrap with `PaneResolutionError` and set the underlying\n      // error as a the `cause`\n      throw new PaneResolutionError({\n        message: typeof e?.message === 'string' ? e.message : '',\n        context,\n        cause: e,\n      })\n    }\n  }\n\nconst wrapWithPublishReplay: PaneResolverMiddleware =\n  (next) =>\n  (...args) => {\n    return next(...args).pipe(\n      // need to add publishReplay + refCount to ensure new subscribers always\n      // get an emission. without this, memoized observables may get stuck\n      // waiting for their first emissions resulting in a loading pane\n      publishReplay(1),\n      refCount(),\n    )\n  }\n\nexport function createPaneResolver(middleware: PaneResolverMiddleware): PaneResolver {\n  // note: this API includes a middleware/wrapper function because the function\n  // is recursive. we want to call the wrapped version of the function always\n  // (even inside of nested calls) so the identifier invoked for the recursion\n  // should be the wrapped version\n  const resolvePane = rethrowWithPaneResolutionErrors(\n    wrapWithPublishReplay(\n      middleware((unresolvedPane, context, flatIndex) => {\n        if (!unresolvedPane) {\n          throw new PaneResolutionError({\n            message: 'Pane returned no child',\n            context,\n            helpId: 'structure-item-returned-no-child',\n          })\n        }\n\n        if (isPromise(unresolvedPane) || isObservable(unresolvedPane)) {\n          return from(unresolvedPane).pipe(\n            switchMap((result) => resolvePane(result, context, flatIndex)),\n          )\n        }\n\n        if (isSerializable(unresolvedPane)) {\n          return resolvePane(unresolvedPane.serialize(context), context, flatIndex)\n        }\n\n        if (typeof unresolvedPane === 'function') {\n          return resolvePane(unresolvedPane(context.id, context), context, flatIndex)\n        }\n\n        return observableOf(unresolvedPane)\n      }),\n    ),\n  )\n\n  return resolvePane\n}\n", "/* eslint-disable @typescript-eslint/ban-types */\n\n// `WeakMap`s require the first type param to extend `object`\nconst bindCache = new WeakMap<object, Map<string, Function>>()\n\n/**\n * An alternative to `obj.method.bind(obj)` that utilizes a weakmap to return\n * the same memory reference for sequent binds.\n */\nexport function memoBind<\n  T extends object,\n  K extends keyof {[P in keyof T]: T[P] extends Function ? T[P] : never},\n>(obj: T, methodKey: K): T[K]\nexport function memoBind(obj: Record<string, unknown>, methodKey: string): Function {\n  const boundMethods = bindCache.get(obj) || new Map<string, Function>()\n  if (boundMethods) {\n    const bound = boundMethods.get(methodKey)\n    if (bound) return bound\n  }\n\n  const method = obj[methodKey]\n\n  if (typeof method !== 'function') {\n    throw new Error(\n      `Expected property \\`${methodKey}\\` to be a function but got ${typeof method} instead.`,\n    )\n  }\n\n  const bound = method.bind(obj)\n  boundMethods.set(methodKey, bound)\n  bindCache.set(obj, boundMethods)\n\n  return bound\n}\n", "import {omit} from 'lodash'\nimport {firstValueFrom, type Observable} from 'rxjs'\n\nimport {type StructureContext} from '../structureBuilder'\nimport {\n  type PaneNode,\n  type RouterPanes,\n  type RouterPaneSiblingContext,\n  type UnresolvedPaneNode,\n} from '../types'\nimport {assignId} from './assignId'\nimport {createPaneResolver, type PaneResolverMiddleware} from './createPaneResolver'\nimport {memoBind} from './memoBind'\n\ninterface TraverseOptions {\n  unresolvedPane: UnresolvedPaneNode | undefined\n  intent: string\n  params: {type: string; id: string; [key: string]: string | undefined}\n  payload: unknown\n  parent: PaneNode | null\n  path: string[]\n  currentId: string\n  flatIndex: number\n  levelIndex: number\n  structureContext: StructureContext\n}\n\nexport interface ResolveIntentOptions {\n  rootPaneNode?: UnresolvedPaneNode\n  intent: string\n  params: {type: string; id: string; [key: string]: string | undefined}\n  payload: unknown\n  structureContext: StructureContext\n}\n\n/**\n * Resolves an intent request using breadth first search. If a match is not\n * found, the intent will resolve to the fallback editor.\n *\n * A match is found if:\n * 1. the `PaneNode` is of type `document` and the its ID matches the intent ID\n * 2. the `PaneNode` is of type `documentList` and the `schemaTypeName` matches\n * 3. the `PaneNode`'s `canHandleIntent` method returns true\n *\n * If a `PaneNode` of type `list` is found, it will be searched for a match.\n *\n * @see PaneNode\n */\nexport async function resolveIntent(options: ResolveIntentOptions): Promise<RouterPanes> {\n  const resolvedPaneCache = new Map<string, Observable<PaneNode>>()\n\n  // this is a simple version of the memoizer in `createResolvedPaneNodeStream`\n  const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n    const key = unresolvedPane && `${assignId(unresolvedPane)}-${context.path.join('__')}`\n    const cachedResolvedPane = key && resolvedPaneCache.get(key)\n    if (cachedResolvedPane) return cachedResolvedPane\n\n    const result = nextFn(unresolvedPane, context, flatIndex)\n    if (key) resolvedPaneCache.set(key, result)\n    return result\n  }\n\n  const resolvePane = createPaneResolver(memoize)\n\n  const fallbackEditorPanes: RouterPanes = [\n    [\n      {\n        id: `__edit__${options.params.id}`,\n        params: {...omit(options.params, ['id']), type: options.params.type},\n        payload: options.payload,\n      },\n    ],\n  ]\n\n  async function traverse({\n    currentId,\n    flatIndex,\n    intent,\n    params,\n    parent,\n    path,\n    payload,\n    unresolvedPane,\n    levelIndex,\n    structureContext,\n  }: TraverseOptions): Promise<\n    Array<{panes: RouterPanes; depthIndex: number; levelIndex: number}>\n  > {\n    if (!unresolvedPane) return []\n\n    const {id: targetId, type: schemaTypeName, ...otherParams} = params\n    const context: RouterPaneSiblingContext = {\n      id: currentId,\n      splitIndex: 0,\n      parent,\n      path,\n      index: flatIndex,\n      params: {},\n      payload: undefined,\n      structureContext,\n    }\n    const resolvedPane = await firstValueFrom(resolvePane(unresolvedPane, context, flatIndex))\n\n    // if the resolved pane is a document pane and the pane's ID matches then\n    // resolve the intent to the current path\n    if (resolvedPane.type === 'document' && resolvedPane.id === targetId) {\n      return [\n        {\n          panes: [\n            ...path.slice(0, path.length - 1).map((i) => [{id: i}]),\n            [{id: targetId, params: otherParams, payload}],\n          ],\n          depthIndex: path.length,\n          levelIndex,\n        },\n      ]\n    }\n\n    // NOTE: if you update this logic, please also update the similar handler in\n    // `getIntentState.ts`\n    if (\n      // if the resolve pane's `canHandleIntent` returns true, then resolve\n      resolvedPane.canHandleIntent?.(intent, params, {\n        pane: resolvedPane,\n        index: flatIndex,\n      }) ||\n      // if the pane's `canHandleIntent` did not return true, then match against\n      // this default case. we will resolve the intent if:\n      (resolvedPane.type === 'documentList' &&\n        // 1. the schema type matches (this required for the document to render)\n        resolvedPane.schemaTypeName === schemaTypeName &&\n        // 2. the filter is the default filter.\n        //\n        // NOTE: this case is to prevent false positive matches where the user\n        // has configured a more specific filter for a particular type. In that\n        // case, the user can implement their own `canHandleIntent` function\n        resolvedPane.options.filter === '_type == $type')\n    ) {\n      return [\n        {\n          panes: [\n            // map the current path to router panes\n            ...path.map((id) => [{id}]),\n            // then augment with the intents IDs and params\n            [{id: params.id, params: otherParams, payload}],\n          ],\n          depthIndex: path.length,\n          levelIndex,\n        },\n      ]\n    }\n\n    if (resolvedPane.type === 'list' && resolvedPane.child && resolvedPane.items) {\n      return (\n        await Promise.all(\n          resolvedPane.items.map((item, nextLevelIndex) => {\n            if (item.type === 'divider') return Promise.resolve([])\n\n            return traverse({\n              currentId: item._id || item.id,\n              flatIndex: flatIndex + 1,\n              intent,\n              params,\n              parent: resolvedPane,\n              path: [...path, item.id],\n              payload,\n              unresolvedPane:\n                typeof resolvedPane.child === 'function'\n                  ? memoBind(resolvedPane, 'child')\n                  : resolvedPane.child,\n              levelIndex: nextLevelIndex,\n              structureContext,\n            })\n          }),\n        )\n      ).flat()\n    }\n\n    return []\n  }\n\n  const matchingPanes = await traverse({\n    currentId: 'root',\n    flatIndex: 0,\n    levelIndex: 0,\n    intent: options.intent,\n    params: options.params,\n    parent: null,\n    path: [],\n    payload: options.payload,\n    unresolvedPane: options.rootPaneNode,\n    structureContext: options.structureContext,\n  })\n\n  const closestPaneToRoot = matchingPanes.sort((a, b) => {\n    // break ties with the level index\n    if (a.depthIndex === b.depthIndex) return a.levelIndex - b.levelIndex\n    return a.depthIndex - b.depthIndex\n  })[0]\n\n  if (closestPaneToRoot) {\n    return closestPaneToRoot.panes\n  }\n\n  return fallbackEditorPanes\n}\n", "import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {isEqual} from 'lodash'\nimport {concat, NEVER, type Observable, of as observableOf} from 'rxjs'\nimport {distinctUntilChanged, map, pairwise, scan, startWith, switchMap} from 'rxjs/operators'\n\nimport {type StructureContext} from '../structureBuilder'\nimport {\n  type DocumentPaneNode,\n  type PaneNode,\n  type PaneNodeResolver,\n  type RouterPanes,\n  type RouterPaneSibling,\n  type RouterPaneSiblingContext,\n  type UnresolvedPaneNode,\n} from '../types'\nimport {assignId} from './assignId'\nimport {\n  createPaneResolver,\n  type PaneResolver,\n  type PaneResolverMiddleware,\n} from './createPaneResolver'\nimport {memoBind} from './memoBind'\nimport {PaneResolutionError} from './PaneResolutionError'\n\n/**\n * the fallback editor child that is implicitly inserted into the structure tree\n * if the id starts with `__edit__`\n */\nconst fallbackEditorChild: PaneNodeResolver = (nodeId, context): DocumentPaneNode => {\n  const id = nodeId.replace(/^__edit__/, '')\n  const {\n    params,\n    payload,\n    structureContext: {resolveDocumentNode},\n  } = context\n  const {type, template} = params\n\n  if (!type) {\n    throw new Error(\n      `Document type for document with ID ${id} was not provided in the router params.`,\n    )\n  }\n\n  let defaultDocumentBuilder = resolveDocumentNode({schemaType: type, documentId: id}).id('editor')\n\n  if (template) {\n    defaultDocumentBuilder = defaultDocumentBuilder.initialValueTemplate(\n      template,\n      payload as {[key: string]: unknown},\n    )\n  }\n\n  return defaultDocumentBuilder.serialize() as DocumentPaneNode\n}\n\n/**\n * takes in a `RouterPaneSiblingContext` and returns a normalized string\n * representation that can be used for comparisons\n */\nfunction hashContext(context: RouterPaneSiblingContext): string {\n  return `contextHash(${JSON.stringify({\n    id: context.id,\n    parentId: parent && assignId(parent),\n    path: context.path,\n    index: context.index,\n    splitIndex: context.splitIndex,\n    serializeOptionsIndex: context.serializeOptions?.index,\n    serializeOptionsPath: context.serializeOptions?.path,\n  })})`\n}\n\n/**\n * takes in `ResolvedPaneMeta` and returns a normalized string representation\n * that can be used for comparisons\n */\nconst hashResolvedPaneMeta = (meta: ResolvedPaneMeta): string => {\n  const normalized = {\n    type: meta.type,\n    id: meta.routerPaneSibling.id,\n    params: meta.routerPaneSibling.params || {},\n    payload: meta.routerPaneSibling.payload || null,\n    flatIndex: meta.flatIndex,\n    groupIndex: meta.groupIndex,\n    siblingIndex: meta.siblingIndex,\n    path: meta.path,\n    paneNode: meta.type === 'resolvedMeta' ? assignId(meta.paneNode) : null,\n  }\n\n  return `metaHash(${JSON.stringify(normalized)})`\n}\n\n/**\n * Represents one flattened \"router pane\", including the source group and\n * sibling indexes.\n *\n * @see RouterPanes\n */\ninterface FlattenedRouterPane {\n  routerPaneSibling: RouterPaneSibling\n  flatIndex: number\n  groupIndex: number\n  siblingIndex: number\n}\n\n/**\n * The state of the accumulator used to store and manage memo cache state\n */\ninterface CacheState {\n  /**\n   * Holds the memoization results keyed by a combination of `assignId` and a\n   * context hash.\n   */\n  resolvedPaneCache: Map<string, Observable<PaneNode>>\n  /**\n   * Acts as a dictionary that stores cache keys by their flat index. This is\n   * used to clean up the cache between different branches in the pane\n   * structure.\n   *\n   * @see createResolvedPaneNodeStream look inside the `scan` where `wrapFn` is\n   * defined\n   */\n  cacheKeysByFlatIndex: Array<Set<string>>\n  /**\n   * The resulting memoized `PaneResolver` function. This function closes over\n   * the `resolvedPaneCache`.\n   */\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n}\n\nexport interface CreateResolvedPaneNodeStreamOptions {\n  /**\n   * an input stream of `RouterPanes`\n   * @see RouterPanes\n   */\n  routerPanesStream: Observable<RouterPanes>\n  /**\n   * any `UnresolvedPaneNode` (could be an observable, promise, pane resolver etc)\n   */\n  rootPaneNode: UnresolvedPaneNode\n  /** used primarily for testing */\n  initialCacheState?: CacheState\n\n  structureContext: StructureContext\n}\n\n/**\n * The result of pane resolving\n */\nexport type ResolvedPaneMeta = {\n  groupIndex: number\n  siblingIndex: number\n  flatIndex: number\n  routerPaneSibling: RouterPaneSibling\n  path: string[]\n} & ({type: 'loading'; paneNode: null} | {type: 'resolvedMeta'; paneNode: PaneNode})\n\ninterface ResolvePaneTreeOptions {\n  resolvePane: PaneResolver\n  flattenedRouterPanes: FlattenedRouterPane[]\n  unresolvedPane: UnresolvedPaneNode | undefined\n  parent: PaneNode | null\n  path: string[]\n  structureContext: StructureContext\n}\n\n/**\n * A recursive pane resolving function. Starts at one unresolved pane node and\n * continues until there is no more flattened router panes that can be used as\n * input to the unresolved panes.\n */\nfunction resolvePaneTree({\n  unresolvedPane,\n  flattenedRouterPanes,\n  parent,\n  path,\n  resolvePane,\n  structureContext,\n}: ResolvePaneTreeOptions): Observable<ResolvedPaneMeta[]> {\n  const [current, ...rest] = flattenedRouterPanes\n  const next = rest[0] as FlattenedRouterPane | undefined\n\n  const context: RouterPaneSiblingContext = {\n    id: current.routerPaneSibling.id,\n    splitIndex: current.siblingIndex,\n    parent,\n    path: [...path, current.routerPaneSibling.id],\n    index: current.flatIndex,\n    params: current.routerPaneSibling.params || {},\n    payload: current.routerPaneSibling.payload,\n    structureContext,\n  }\n\n  try {\n    return resolvePane(unresolvedPane, context, current.flatIndex).pipe(\n      // this switch map receives a resolved pane\n      switchMap((paneNode) => {\n        // we can create a `resolvedMeta` type using it\n        const resolvedPaneMeta: ResolvedPaneMeta = {\n          type: 'resolvedMeta',\n          ...current,\n          paneNode: paneNode,\n          path: context.path,\n        }\n\n        // for the other unresolved panes, we can create \"loading panes\"\n        const loadingPanes = rest.map((i, restIndex) => {\n          const loadingPanePath = [\n            ...context.path,\n            ...rest.slice(restIndex).map((_, currentIndex) => `[${i.flatIndex + currentIndex}]`),\n          ]\n\n          const loadingPane: ResolvedPaneMeta = {\n            type: 'loading',\n            path: loadingPanePath,\n            paneNode: null,\n            ...i,\n          }\n\n          return loadingPane\n        })\n\n        if (!rest.length) {\n          return observableOf([resolvedPaneMeta])\n        }\n\n        let nextStream\n\n        if (\n          // the fallback editor case\n          next?.routerPaneSibling.id.startsWith('__edit__')\n        ) {\n          nextStream = resolvePaneTree({\n            unresolvedPane: fallbackEditorChild,\n            flattenedRouterPanes: rest,\n            parent,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        } else if (current.groupIndex === next?.groupIndex) {\n          // if the next flattened router pane has the same group index as the\n          // current flattened router pane, then the next flattened router pane\n          // belongs to the same group (i.e. it is a split pane)\n          nextStream = resolvePaneTree({\n            unresolvedPane,\n            flattenedRouterPanes: rest,\n            parent,\n            path,\n            resolvePane,\n            structureContext,\n          })\n        } else {\n          // normal children resolving\n          nextStream = resolvePaneTree({\n            unresolvedPane:\n              typeof paneNode.child === 'function'\n                ? (memoBind(paneNode, 'child') as PaneNodeResolver)\n                : paneNode.child,\n            flattenedRouterPanes: rest,\n            parent: paneNode,\n            path: context.path,\n            resolvePane,\n            structureContext,\n          })\n        }\n\n        return concat(\n          // we emit the loading panes first in a concat (this emits immediately)\n          observableOf([resolvedPaneMeta, ...loadingPanes]),\n          // then whenever the next stream is done, the results will be combined.\n          nextStream.pipe(map((nextResolvedPanes) => [resolvedPaneMeta, ...nextResolvedPanes])),\n        )\n      }),\n    )\n  } catch (e) {\n    if (e instanceof PaneResolutionError) {\n      if (e.context) {\n        console.warn(\n          `Pane resolution error at index ${e.context.index}${\n            e.context.splitIndex > 0 ? ` for split pane index ${e.context.splitIndex}` : ''\n          }: ${e.message}${e.helpId ? ` - see ${generateHelpUrl(e.helpId)}` : ''}`,\n          e,\n        )\n      }\n\n      if (e.helpId === 'structure-item-returned-no-child') {\n        // returning an observable of an empty array will remove loading panes\n        // note: this one intentionally does not throw\n        return observableOf([])\n      }\n    }\n\n    throw e\n  }\n}\n\n/**\n * Takes in a stream of `RouterPanes` and an unresolved root pane and returns\n * a stream of `ResolvedPaneMeta`\n */\nexport function createResolvedPaneNodeStream({\n  routerPanesStream,\n  rootPaneNode,\n  initialCacheState = {\n    cacheKeysByFlatIndex: [],\n    flattenedRouterPanes: [],\n    resolvedPaneCache: new Map(),\n    resolvePane: () => NEVER,\n  },\n  structureContext,\n}: CreateResolvedPaneNodeStreamOptions): Observable<ResolvedPaneMeta[]> {\n  const resolvedPanes$ = routerPanesStream.pipe(\n    // add in implicit \"root\" router pane\n    map((rawRouterPanes) => [[{id: 'root'}], ...rawRouterPanes]),\n    // create flattened router panes\n    map((routerPanes) => {\n      const flattenedRouterPanes: FlattenedRouterPane[] = routerPanes\n        .flatMap((routerPaneGroup, groupIndex) =>\n          routerPaneGroup.map((routerPaneSibling, siblingIndex) => ({\n            routerPaneSibling,\n            groupIndex,\n            siblingIndex,\n          })),\n        )\n        // add in the flat index\n        .map((i, index) => ({...i, flatIndex: index}))\n\n      return flattenedRouterPanes\n    }),\n    // calculate a \"diffIndex\" used for clearing the memo cache\n    startWith([] as FlattenedRouterPane[]),\n    pairwise(),\n    map(([prev, curr]) => {\n      for (let i = 0; i < curr.length; i++) {\n        const prevValue = prev[i]\n        const currValue = curr[i]\n\n        if (!isEqual(prevValue, currValue)) {\n          return {\n            flattenedRouterPanes: curr,\n            diffIndex: i,\n          }\n        }\n      }\n\n      return {\n        flattenedRouterPanes: curr,\n        diffIndex: curr.length,\n      }\n    }),\n    // create the memoized `resolvePane` function and manage the memo cache\n    scan((acc, next) => {\n      const {cacheKeysByFlatIndex, resolvedPaneCache} = acc\n      const {flattenedRouterPanes, diffIndex} = next\n\n      // use the `cacheKeysByFlatIndex` like a dictionary to find cache keys to\n      // and cache keys to delete\n      const beforeDiffIndex = cacheKeysByFlatIndex.slice(0, diffIndex + 1)\n      const afterDiffIndex = cacheKeysByFlatIndex.slice(diffIndex + 1)\n\n      const keysToKeep = new Set(beforeDiffIndex.flatMap((keySet) => Array.from(keySet)))\n      const keysToDelete = afterDiffIndex\n        .flatMap((keySet) => Array.from(keySet))\n        .filter((key) => !keysToKeep.has(key))\n\n      for (const key of keysToDelete) {\n        resolvedPaneCache.delete(key)\n      }\n\n      // create a memoizing pane resolver middleware that utilizes the cache\n      // maintained above. this keeps the cache from growing indefinitely\n      const memoize: PaneResolverMiddleware = (nextFn) => (unresolvedPane, context, flatIndex) => {\n        const key = unresolvedPane && `${assignId(unresolvedPane)}-${hashContext(context)}`\n        const cachedResolvedPane = key && resolvedPaneCache.get(key)\n        if (cachedResolvedPane) return cachedResolvedPane\n\n        const result = nextFn(unresolvedPane, context, flatIndex)\n        if (!key) return result\n\n        const cacheKeySet = cacheKeysByFlatIndex[flatIndex] || new Set()\n        cacheKeySet.add(key)\n        cacheKeysByFlatIndex[flatIndex] = cacheKeySet\n        resolvedPaneCache.set(key, result)\n        return result\n      }\n\n      return {\n        flattenedRouterPanes,\n        cacheKeysByFlatIndex,\n        resolvedPaneCache,\n        resolvePane: createPaneResolver(memoize),\n      }\n    }, initialCacheState),\n    // run the memoized, recursive resolving\n    switchMap(({flattenedRouterPanes, resolvePane}) =>\n      resolvePaneTree({\n        unresolvedPane: rootPaneNode,\n        flattenedRouterPanes,\n        parent: null,\n        path: [],\n        resolvePane,\n        structureContext,\n      }),\n    ),\n  )\n\n  // after we've created a stream of `ResolvedPaneMeta[]`, we need to clean up\n  // the results to remove unwanted loading panes and prevent unnecessary\n  // emissions\n  return resolvedPanes$.pipe(\n    // this diffs the previous emission with the current one. if there is a new\n    // loading pane at the same position where a previous pane already had a\n    // resolved value (looking at the IDs to compare), then return the previous\n    // pane instead of the loading pane\n    scan(\n      (prev, next) =>\n        next.map((nextPane, index) => {\n          const prevPane = prev[index] as ResolvedPaneMeta | undefined\n          if (!prevPane) return nextPane\n          if (nextPane.type !== 'loading') return nextPane\n\n          if (prevPane.routerPaneSibling.id === nextPane.routerPaneSibling.id) {\n            return prevPane\n          }\n          return nextPane\n        }),\n      [] as ResolvedPaneMeta[],\n    ),\n    // this prevents duplicate emissions\n    distinctUntilChanged((prev, next) => {\n      if (prev.length !== next.length) return false\n\n      for (let i = 0; i < next.length; i++) {\n        const prevValue = prev[i]\n        const nextValue = next[i]\n        if (hashResolvedPaneMeta(prevValue) !== hashResolvedPaneMeta(nextValue)) {\n          return false\n        }\n      }\n\n      return true\n    }),\n  )\n}\n", "import {useEffect, useMemo, useState} from 'react'\nimport {ReplaySubject} from 'rxjs'\nimport {map} from 'rxjs/operators'\nimport {type RouterState, useRouter} from 'sanity/router'\n\nimport {LOADING_PANE} from '../constants'\nimport {type PaneNode, type RouterPaneGroup, type RouterPanes} from '../types'\nimport {useStructureTool} from '../useStructureTool'\nimport {createResolvedPaneNodeStream} from './createResolvedPaneNodeStream'\n\ninterface PaneData {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  key: string\n  pane: PaneNode | typeof LOADING_PANE\n  params: Record<string, string | undefined>\n  path: string\n  payload: unknown\n  selected: boolean\n  siblingIndex: number\n}\n\nexport interface Panes {\n  paneDataItems: PaneData[]\n  routerPanes: RouterPanes\n  resolvedPanes: (PaneNode | typeof LOADING_PANE)[]\n}\n\nfunction useRouterPanesStream() {\n  const [routerStateSubject] = useState(() => new ReplaySubject<RouterState>(1))\n  const routerPanes$ = useMemo(\n    () =>\n      routerStateSubject\n        .asObservable()\n        .pipe(map((_routerState) => (_routerState?.panes || []) as RouterPanes)),\n    [routerStateSubject],\n  )\n  const {state: routerState} = useRouter()\n  useEffect(() => {\n    routerStateSubject.next(routerState)\n  }, [routerState, routerStateSubject])\n\n  return routerPanes$\n}\n\nexport function useResolvedPanes(): Panes {\n  // used to propagate errors from async effect. throwing inside of the render\n  // will bubble the error to react where it can be picked up by standard error\n  // boundaries\n  const [error, setError] = useState<unknown>()\n  if (error) throw error\n\n  const {structureContext, rootPaneNode} = useStructureTool()\n\n  const [data, setData] = useState<Panes>({\n    paneDataItems: [],\n    resolvedPanes: [],\n    routerPanes: [],\n  })\n\n  const routerPanesStream = useRouterPanesStream()\n\n  useEffect(() => {\n    const resolvedPanes$ = createResolvedPaneNodeStream({\n      rootPaneNode,\n      routerPanesStream,\n      structureContext,\n    }).pipe(\n      map((resolvedPanes) => {\n        const routerPanes = resolvedPanes.reduce<RouterPanes>((acc, next) => {\n          const currentGroup = acc[next.groupIndex] || []\n          currentGroup[next.siblingIndex] = next.routerPaneSibling\n          acc[next.groupIndex] = currentGroup\n          return acc\n        }, [])\n\n        const groupsLen = routerPanes.length\n\n        const paneDataItems = resolvedPanes.map((pane) => {\n          const {groupIndex, flatIndex, siblingIndex, routerPaneSibling, path} = pane\n          const itemId = routerPaneSibling.id\n          const nextGroup = routerPanes[groupIndex + 1] as RouterPaneGroup | undefined\n\n          const paneDataItem: PaneData = {\n            active: groupIndex === groupsLen - 2,\n            childItemId: nextGroup?.[0].id ?? null,\n            index: flatIndex,\n            itemId: routerPaneSibling.id,\n            groupIndex,\n            key: `${\n              pane.type === 'loading' ? 'unknown' : pane.paneNode.id\n            }-${itemId}-${siblingIndex}`,\n            pane: pane.type === 'loading' ? LOADING_PANE : pane.paneNode,\n            params: routerPaneSibling.params || {},\n            path: path.join(';'),\n            payload: routerPaneSibling.payload,\n            selected: flatIndex === resolvedPanes.length - 1,\n            siblingIndex,\n          }\n\n          return paneDataItem\n        })\n\n        return {\n          paneDataItems,\n          routerPanes,\n          resolvedPanes: paneDataItems.map((pane) => pane.pane),\n        }\n      }),\n    )\n\n    const subscription = resolvedPanes$.subscribe({\n      next: (result) => setData(result),\n      error: (e) => setError(e),\n    })\n\n    return () => subscription.unsubscribe()\n  }, [rootPaneNode, routerPanesStream, structureContext])\n\n  return data\n}\n", "import {uuid} from '@sanity/uuid'\nimport {firstValueFrom, type Observable} from 'rxjs'\nimport {type DocumentStore, getPublishedId} from 'sanity'\n\nimport {PaneResolutionError} from '../../../structureResolvers'\n\nexport function removeDraftPrefix(documentId: string): string {\n  const publishedId = getPublishedId(documentId)\n\n  if (publishedId !== documentId) {\n    console.warn(\n      'Removed unexpected draft id in document link: All links to documents should have the ' +\n        '`drafts.`-prefix removed and something appears to have made an intent link to `%s`',\n      documentId,\n    )\n  }\n\n  return publishedId\n}\n\nexport async function ensureDocumentIdAndType(\n  documentStore: DocumentStore,\n  id: string | undefined,\n  type: string | undefined,\n): Promise<{id: string; type: string}> {\n  if (id && type) return {id, type}\n  if (!id && type) return {id: uuid(), type}\n  if (id && !type) {\n    const resolvedType = await firstValueFrom(\n      documentStore.resolveTypeForDocument(id) as Observable<string>,\n    )\n\n    return {id, type: resolvedType}\n  }\n\n  throw new PaneResolutionError({\n    message: 'Neither document `id` or `type` was provided when trying to resolve intent.',\n  })\n}\n", "import {memo, useCallback, useEffect, useState} from 'react'\nimport {isRecord, useDocumentStore} from 'sanity'\nimport {useRouter, useRouterState} from 'sanity/router'\n\nimport {resolveIntent} from '../../../structureResolvers'\nimport {useStructureTool} from '../../../useStructureTool'\nimport {ensureDocumentIdAndType} from './utils'\n\nconst EMPTY_RECORD: Record<string, unknown> = {}\n\n/**\n * A component that receives an intent from props and redirects to the resolved\n * intent location (while showing a loading spinner during the process)\n */\nexport const IntentResolver = memo(function IntentResolver() {\n  const {navigate} = useRouter()\n  const maybeIntent = useRouterState(\n    useCallback((routerState) => {\n      const intentName = typeof routerState.intent === 'string' ? routerState.intent : undefined\n      return intentName\n        ? {\n            intent: intentName,\n            params: isRecord(routerState.params) ? routerState.params : EMPTY_RECORD,\n            payload: routerState.payload,\n          }\n        : undefined\n    }, []),\n  )\n  const {rootPaneNode, structureContext} = useStructureTool()\n  const documentStore = useDocumentStore()\n  const [error, setError] = useState<unknown>(null)\n\n  // this re-throws errors so that parent ErrorBoundary's can handle them properly\n  if (error) throw error\n\n  // eslint-disable-next-line consistent-return\n  useEffect(() => {\n    if (maybeIntent) {\n      const {intent, params, payload} = maybeIntent\n\n      let cancelled = false\n      // eslint-disable-next-line no-inner-declarations\n      async function effect() {\n        const {id, type} = await ensureDocumentIdAndType(\n          documentStore,\n          typeof params.id === 'string' ? params.id : undefined,\n          typeof params.type === 'string' ? params.type : undefined,\n        )\n\n        if (cancelled) return\n\n        const panes = await resolveIntent({\n          intent,\n          params: {...params, id, type},\n          payload,\n          rootPaneNode,\n          structureContext,\n        })\n\n        if (cancelled) return\n\n        navigate({panes}, {replace: true})\n      }\n\n      effect().catch(setError)\n\n      return () => {\n        cancelled = true\n      }\n    }\n  }, [documentStore, maybeIntent, navigate, rootPaneNode, structureContext])\n\n  return null\n})\n", "import {generateHelpUrl} from '@sanity/generate-help-url'\nimport {SyncIcon} from '@sanity/icons'\nimport {Box, Card, Code, Container, Heading, Stack, Text} from '@sanity/ui'\nimport {useCallback} from 'react'\nimport {useTranslation} from 'sanity'\nimport {styled} from 'styled-components'\n\nimport {Button} from '../../../ui-components'\nimport {structureLocaleNamespace} from '../../i18n'\nimport {SerializeError} from '../../structureBuilder'\nimport {PaneResolutionError} from '../../structureResolvers'\n\nconst PathSegment = styled.span`\n  &:not(:last-child)::after {\n    content: ' ➝ ';\n    opacity: 0.5;\n  }\n`\n\nfunction formatStack(stack: string) {\n  return (\n    stack\n      // Prettify builder functions\n      .replace(/\\(\\.\\.\\.\\)\\./g, '(...)\\n  .')\n      // Remove webpack cruft from function names\n      .replace(/__WEBPACK_IMPORTED_MODULE_\\d+_+/g, '')\n      // Remove default export postfix from function names\n      .replace(/___default\\./g, '.')\n      // Replace full host path, leave only path to JS-file\n      .replace(new RegExp(` \\\\(https?:\\\\/\\\\/${window.location.host}`, 'g'), ' (')\n  )\n}\n\ninterface StructureErrorProps {\n  error: unknown\n}\n\nexport function StructureError({error}: StructureErrorProps) {\n  if (!(error instanceof PaneResolutionError)) {\n    throw error\n  }\n  const {cause} = error\n  const {t} = useTranslation(structureLocaleNamespace)\n\n  // Serialize errors are well-formatted and should be readable, in these cases a stack trace is\n  // usually not helpful. Build errors in dev (with HMR) usually also contains a bunch of garbage\n  // instead of an actual error message, so make sure we show the message in these cases as well\n  const stack = cause?.stack || error.stack\n  const showStack =\n    stack && !(cause instanceof SerializeError) && !error.message.includes('Module build failed:')\n\n  const path = cause instanceof SerializeError ? cause.path : []\n  const helpId = (cause instanceof SerializeError && cause.helpId) || error.helpId\n\n  const handleReload = useCallback(() => {\n    window.location.reload()\n  }, [])\n\n  return (\n    <Card height=\"fill\" overflow=\"auto\" padding={4} sizing=\"border\" tone=\"critical\">\n      <Container>\n        <Heading as=\"h2\">{t('structure-error.header.text')}</Heading>\n\n        <Card marginTop={4} padding={4} radius={2} overflow=\"auto\" shadow={1} tone=\"inherit\">\n          {path.length > 0 && (\n            <Stack space={2}>\n              <Text size={1} weight=\"medium\">\n                {t('structure-error.structure-path.label')}\n              </Text>\n              <Code>\n                {/* TODO: it seems like the path is off by one and includes */}\n                {/* `root` twice  */}\n                {path.slice(1).map((segment, i) => (\n                  // eslint-disable-next-line react/no-array-index-key\n                  <PathSegment key={`${segment}-${i}`}>{segment}</PathSegment>\n                ))}\n              </Code>\n            </Stack>\n          )}\n\n          <Stack marginTop={4} space={2}>\n            <Text size={1} weight=\"medium\">\n              {t('structure-error.error.label')}\n            </Text>\n            <Code>{showStack ? formatStack(stack) : error.message}</Code>\n          </Stack>\n\n          {helpId && (\n            <Box marginTop={4}>\n              <Text>\n                <a href={generateHelpUrl(helpId)} rel=\"noopener noreferrer\" target=\"_blank\">\n                  {t('structure-error.docs-link.text')}\n                </a>\n              </Text>\n            </Box>\n          )}\n\n          <Box marginTop={4}>\n            <Button\n              text={t('structure-error.reload-button.text')}\n              icon={SyncIcon}\n              tone=\"primary\"\n              onClick={handleReload}\n            />\n          </Box>\n        </Card>\n      </Container>\n    </Card>\n  )\n}\n", "import {Box, Text} from '@sanity/ui'\nimport {isRecord, Translate, useTranslation} from 'sanity'\n\nimport {Pane, PaneContent, PaneHeader} from '../../components/pane'\nimport {structureLocaleNamespace} from '../../i18n'\n\ninterface UnknownPaneProps {\n  isSelected: boolean\n  pane: unknown\n  paneKey: string\n}\n\n/**\n * @internal\n */\nexport function UnknownPane(props: UnknownPaneProps) {\n  const {isSelected, pane, paneKey} = props\n  const type = (isRecord(pane) && pane.type) || null\n  const {t} = useTranslation(structureLocaleNamespace)\n  return (\n    <Pane id={paneKey} selected={isSelected}>\n      <PaneHeader title={t('panes.unknown-pane-type.title')} />\n      <PaneContent>\n        <Box padding={4}>\n          {typeof type === 'string' ? (\n            <Text as=\"p\" muted>\n              <Translate\n                t={t}\n                i18nKey=\"panes.unknown-pane-type.unknown-type.text\"\n                values={{type}}\n              />\n            </Text>\n          ) : (\n            <Text as=\"p\" muted>\n              <Translate t={t} i18nKey=\"panes.unknown-pane-type.missing-type.text\" />\n            </Text>\n          )}\n        </Box>\n      </PaneContent>\n    </Pane>\n  )\n}\n", "import {isEqual} from 'lodash'\nimport {lazy, memo, Suspense} from 'react'\n\nimport {PaneRouterProvider} from '../components/paneRouter'\nimport {type PaneNode} from '../types'\nimport {LoadingPane} from './loading'\nimport {UnknownPane} from './unknown'\n\ninterface StructureToolPaneProps {\n  active: boolean\n  childItemId: string | null\n  groupIndex: number\n  index: number\n  itemId: string\n  pane: PaneNode\n  paneKey: string\n  params: Record<string, string | undefined>\n  payload: unknown\n  path: string\n  selected: boolean\n  siblingIndex: number\n}\n\n// TODO: audit this creates separate chunks\nconst paneMap = {\n  component: lazy(() => import('./userComponent')),\n  document: lazy(() => import('./document/pane')),\n  documentList: lazy(() => import('./documentList/pane')),\n  list: lazy(() => import('./list')),\n}\n\n/**\n * NOTE: The same pane might appear multiple times (split pane), so use index as tiebreaker\n *\n * @internal\n */\nexport const StructureToolPane = memo(\n  function StructureToolPane(props: StructureToolPaneProps) {\n    const {\n      active,\n      childItemId,\n      groupIndex,\n      index,\n      itemId,\n      pane,\n      paneKey,\n      params,\n      payload,\n      path,\n      selected,\n      siblingIndex,\n    } = props\n\n    const PaneComponent = paneMap[pane.type] || UnknownPane\n\n    return (\n      <PaneRouterProvider\n        flatIndex={index}\n        index={groupIndex}\n        params={params}\n        payload={payload}\n        siblingIndex={siblingIndex}\n      >\n        <Suspense fallback={<LoadingPane paneKey={paneKey} path={path} selected={selected} />}>\n          <PaneComponent\n            childItemId={childItemId || ''}\n            index={index}\n            itemId={itemId}\n            isActive={active}\n            isSelected={selected}\n            paneKey={paneKey}\n            // @ts-expect-error TS doesn't know how to handle this intersection\n            pane={pane}\n          />\n        </Suspense>\n      </PaneRouterProvider>\n    )\n  },\n  (\n    {params: prevParams = {}, payload: prevPayload = null, ...prev},\n    {params: nextParams = {}, payload: nextPayload = null, ...next},\n  ) => {\n    // deeply compare these objects (it's okay, they're small)\n    if (!isEqual(prevParams, nextParams)) return false\n    if (!isEqual(prevPayload, nextPayload)) return false\n\n    const keys = new Set([...Object.keys(prev), ...Object.keys(next)]) as Set<\n      keyof typeof next | keyof typeof prev\n    >\n\n    // then shallow equal the rest\n    for (const key of keys) {\n      if (prev[key] !== next[key]) return false\n    }\n\n    return true\n  },\n)\n", "import {WarningOutlineIcon} from '@sanity/icons'\nimport {Box, Card, Container, Flex, Stack, Text} from '@sanity/ui'\nimport {useTranslation} from 'sanity'\n\nimport {structureLocaleNamespace} from '../../i18n'\n\nexport function NoDocumentTypesScreen() {\n  const {t} = useTranslation(structureLocaleNamespace)\n\n  return (\n    <Card height=\"fill\">\n      <Flex align=\"center\" height=\"fill\" justify=\"center\" padding={4} sizing=\"border\">\n        <Container width={0}>\n          <Card padding={4} radius={2} shadow={1} tone=\"caution\">\n            <Flex>\n              <Box>\n                <Text size={1}>\n                  <WarningOutlineIcon />\n                </Text>\n              </Box>\n              <Stack flex={1} marginLeft={3} space={3}>\n                <Text as=\"h1\" size={1} weight=\"medium\">\n                  {t('no-document-types-screen.title')}\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  {t('no-document-types-screen.subtitle')}\n                </Text>\n                <Text as=\"p\" muted size={1}>\n                  <a\n                    href=\"https://www.sanity.io/docs/create-a-schema-and-configure-sanity-studio\"\n                    target=\"_blank\"\n                    rel=\"noreferrer\"\n                  >\n                    {t('no-document-types-screen.link-text')}\n                  </a>\n                </Text>\n              </Stack>\n            </Flex>\n          </Card>\n        </Container>\n      </Flex>\n    </Card>\n  )\n}\n", "import {type ObjectSchemaType} from '@sanity/types'\nimport {useEffect} from 'react'\nimport {\n  unstable_useValuePreview as useValuePreview,\n  useEditState,\n  useSchema,\n  useTranslation,\n} from 'sanity'\n\nimport {LOADING_PANE} from '../../constants'\nimport {structureLocaleNamespace} from '../../i18n'\nimport {type Panes} from '../../structureResolvers'\nimport {type DocumentPaneNode} from '../../types'\nimport {useStructureTool} from '../../useStructureTool'\n\ninterface StructureTitleProps {\n  resolvedPanes: Panes['resolvedPanes']\n}\n\nconst DocumentTitle = (props: {documentId: string; documentType: string}) => {\n  const {documentId, documentType} = props\n  const editState = useEditState(documentId, documentType)\n  const schema = useSchema()\n  const {t} = useTranslation(structureLocaleNamespace)\n  const isNewDocument = !editState?.published && !editState?.draft\n  const documentValue = editState?.draft || editState?.published\n  const schemaType = schema.get(documentType) as ObjectSchemaType | undefined\n\n  const {value, isLoading: previewValueIsLoading} = useValuePreview({\n    enabled: true,\n    schemaType,\n    value: documentValue,\n  })\n\n  const documentTitle = isNewDocument\n    ? t('browser-document-title.new-document', {\n        schemaType: schemaType?.title || schemaType?.name,\n      })\n    : value?.title || t('browser-document-title.untitled-document')\n\n  const settled = editState.ready && !previewValueIsLoading\n  const newTitle = useConstructDocumentTitle(documentTitle)\n  useEffect(() => {\n    if (!settled) return\n    // Set the title as the document title\n    document.title = newTitle\n  }, [documentTitle, settled, newTitle])\n\n  return null\n}\n\nconst PassthroughTitle = (props: {title?: string}) => {\n  const {title} = props\n  const newTitle = useConstructDocumentTitle(title)\n  useEffect(() => {\n    // Set the title as the document title\n    document.title = newTitle\n  }, [newTitle, title])\n  return null\n}\n\nexport const StructureTitle = (props: StructureTitleProps) => {\n  const {resolvedPanes} = props\n\n  if (!resolvedPanes?.length) return null\n\n  const lastPane = resolvedPanes[resolvedPanes.length - 1]\n\n  // If the last pane is loading, display the structure tool title only\n  if (isLoadingPane(lastPane)) {\n    return <PassthroughTitle />\n  }\n\n  // If the last pane is a document\n  if (isDocumentPane(lastPane)) {\n    // Passthrough the document pane's title, which may be defined in structure builder\n    if (lastPane?.title) {\n      return <PassthroughTitle title={lastPane.title} />\n    }\n\n    // Otherwise, display a `document.title` containing the resolved Sanity document title\n    return <DocumentTitle documentId={lastPane.options.id} documentType={lastPane.options.type} />\n  }\n\n  // Otherwise, display the last pane's title (if present)\n  return <PassthroughTitle title={lastPane?.title} />\n}\n\n/**\n * Construct a pipe delimited title containing `activeTitle` (if applicable) and the base structure title.\n *\n * @param activeTitle - Title of the first segment\n *\n * @returns A pipe delimited title in the format `${activeTitle} | %BASE_STRUCTURE_TITLE%`\n * or simply `%BASE_STRUCTURE_TITLE` if `activeTitle` is undefined.\n */\nfunction useConstructDocumentTitle(activeTitle?: string) {\n  const structureToolBaseTitle = useStructureTool().structureContext.title\n  return [activeTitle, structureToolBaseTitle].filter((title) => title).join(' | ')\n}\n\n// Type guards\nfunction isDocumentPane(pane: Panes['resolvedPanes'][number]): pane is DocumentPaneNode {\n  return pane !== LOADING_PANE && pane.type === 'document'\n}\n\nfunction isLoadingPane(pane: Panes['resolvedPanes'][number]): pane is typeof LOADING_PANE {\n  return pane === LOADING_PANE\n}\n", "import {PortalProvider, useTheme, useToast} from '@sanity/ui'\nimport {isHotkey} from 'is-hotkey-esm'\nimport {Fragment, memo, useCallback, useEffect, useState} from 'react'\nimport {_isCustomDocumentTypeDefinition, useSchema} from 'sanity'\nimport {useRouterState} from 'sanity/router'\nimport {styled} from 'styled-components'\n\nimport {LOADING_PANE} from '../../constants'\nimport {LoadingPane, StructureToolPane} from '../../panes'\nimport {useResolvedPanes} from '../../structureResolvers'\nimport {type PaneNode} from '../../types'\nimport {useStructureTool} from '../../useStructureTool'\nimport {PaneLayout} from '../pane'\nimport {NoDocumentTypesScreen} from './NoDocumentTypesScreen'\nimport {StructureTitle} from './StructureTitle'\n\ninterface StructureToolProps {\n  onPaneChange: (panes: Array<PaneNode | typeof LOADING_PANE>) => void\n}\n\nconst StyledPaneLayout = styled(PaneLayout)`\n  min-height: 100%;\n  min-width: 320px;\n`\n\nconst isSaveHotkey = isHotkey('mod+s')\n\n/**\n * @internal\n */\nexport const StructureTool = memo(function StructureTool({onPaneChange}: StructureToolProps) {\n  const {push: pushToast} = useToast()\n  const schema = useSchema()\n  const {layoutCollapsed, setLayoutCollapsed} = useStructureTool()\n  const {paneDataItems, resolvedPanes} = useResolvedPanes()\n  // Intent resolving is processed by the sibling `<IntentResolver />` but it doesn't have a UI for indicating progress.\n  // We handle that here, so if there are only 1 pane (the root structure), and there's an intent state in the router, we need to show a placeholder LoadingPane until\n  // the structure is resolved and we know what panes to load/display\n  const isResolvingIntent = useRouterState(\n    useCallback((routerState) => typeof routerState.intent === 'string', []),\n  )\n  const {\n    sanity: {media},\n  } = useTheme()\n\n  const [portalElement, setPortalElement] = useState<HTMLDivElement | null>(null)\n\n  const handleRootCollapse = useCallback(() => setLayoutCollapsed(true), [setLayoutCollapsed])\n  const handleRootExpand = useCallback(() => setLayoutCollapsed(false), [setLayoutCollapsed])\n\n  useEffect(() => {\n    // we check for length before emitting here to skip the initial empty array\n    // state from the `useResolvedPanes` hook. there should always be a root\n    // pane emitted on subsequent emissions\n    if (resolvedPanes.length) {\n      onPaneChange(resolvedPanes)\n    }\n  }, [onPaneChange, resolvedPanes])\n\n  useEffect(() => {\n    const handleGlobalKeyDown = (event: KeyboardEvent) => {\n      // Prevent `Cmd+S`\n      if (isSaveHotkey(event)) {\n        event.preventDefault()\n\n        pushToast({\n          closable: true,\n          id: 'auto-save-message',\n          status: 'info',\n          title: 'Your work is automatically saved!',\n          duration: 4000,\n        })\n      }\n    }\n\n    window.addEventListener('keydown', handleGlobalKeyDown)\n    return () => window.removeEventListener('keydown', handleGlobalKeyDown)\n  }, [pushToast])\n\n  const hasDefinedDocumentTypes = schema._original?.types.some(_isCustomDocumentTypeDefinition)\n\n  if (!hasDefinedDocumentTypes) {\n    return <NoDocumentTypesScreen />\n  }\n\n  return (\n    <PortalProvider element={portalElement || null}>\n      <StyledPaneLayout\n        flex={1}\n        height={layoutCollapsed ? undefined : 'fill'}\n        minWidth={media[1]}\n        onCollapse={handleRootCollapse}\n        onExpand={handleRootExpand}\n      >\n        {paneDataItems.map(\n          ({\n            active,\n            childItemId,\n            groupIndex,\n            itemId,\n            key: paneKey,\n            pane,\n            index: paneIndex,\n            params: paneParams,\n            path,\n            payload,\n            siblingIndex,\n            selected,\n          }) => (\n            <Fragment key={`${pane === LOADING_PANE ? 'loading' : pane.type}-${paneIndex}`}>\n              {pane === LOADING_PANE ? (\n                <LoadingPane paneKey={paneKey} path={path} selected={selected} />\n              ) : (\n                <StructureToolPane\n                  active={active}\n                  groupIndex={groupIndex}\n                  index={paneIndex}\n                  pane={pane}\n                  childItemId={childItemId}\n                  itemId={itemId}\n                  paneKey={paneKey}\n                  params={paneParams}\n                  payload={payload}\n                  path={path}\n                  selected={selected}\n                  siblingIndex={siblingIndex}\n                />\n              )}\n            </Fragment>\n          ),\n        )}\n        {/* If there's just 1 pane (the root), or less, and we're resolving an intent then it's necessary to show */}\n        {/* a loading indicator as the intent resolving is async, could take a while and can also be interrupted/redirected */}\n        {paneDataItems.length <= 1 && isResolvingIntent && (\n          <LoadingPane paneKey=\"intent-resolver\" />\n        )}\n      </StyledPaneLayout>\n      <StructureTitle resolvedPanes={resolvedPanes} />\n      <div data-portal=\"\" ref={setPortalElement} />\n    </PortalProvider>\n  )\n})\n", "import {useEffect, useState} from 'react'\nimport {SourceProvider, type Tool, useWorkspace} from 'sanity'\n\nimport {ErrorBoundary} from '../../../ui-components/errorBoundary'\nimport {setActivePanes} from '../../getIntentState'\nimport {StructureToolProvider} from '../../StructureToolProvider'\nimport {type StructureToolOptions} from '../../types'\nimport {IntentResolver} from './intentResolver'\nimport {StructureError} from './StructureError'\nimport {StructureTool} from './StructureTool'\n\ninterface StructureToolBoundaryProps {\n  tool: Tool<StructureToolOptions>\n}\n\nexport function StructureToolBoundary({tool: {options}}: StructureToolBoundaryProps) {\n  const {unstable_sources: sources} = useWorkspace()\n  const [firstSource] = sources\n  const {source, defaultDocumentNode, structure} = options || {}\n\n  // Set active panes to blank on mount and unmount\n  useEffect(() => {\n    setActivePanes([])\n    return () => setActivePanes([])\n  }, [])\n\n  const [{error}, setError] = useState<{error: unknown}>({error: null})\n\n  // this re-throws if the error it catches is not a PaneResolutionError\n  if (error) return <StructureError error={error} />\n\n  return (\n    <ErrorBoundary onCatch={setError}>\n      <SourceProvider name={source || firstSource.name}>\n        <StructureToolProvider defaultDocumentNode={defaultDocumentNode} structure={structure}>\n          <StructureTool onPaneChange={setActivePanes} />\n          <IntentResolver />\n        </StructureToolProvider>\n      </SourceProvider>\n    </ErrorBoundary>\n  )\n}\n"],
  "mappings": "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",
  "names": ["emptyArray", "PaneRouterProvider", "props", "$", "_c", "children", "flatIndex", "index", "params", "payload", "siblingIndex", "navigate", "navigateIntent", "resolvePathFromState", "useRouter", "routerState", "useRouterState", "panes", "expand", "usePaneLayout", "t0", "routerPaneGroups", "t1", "length", "lastPane", "groupIndex", "t2", "modifier", "currentGroup", "currentItem", "nextGroup", "nextPanes", "slice", "__spreadProps", "__spreadValues", "createNextRouterState", "t3", "modifier_0", "nextRouterState_0", "setTimeout", "nextRouterState", "modifyCurrentGroup", "t4", "nextParams", "nextRouterState_1", "siblings", "item", "createPathWithParams", "t5", "nextPayload", "siblings_0", "item_0", "setPayload", "t6", "nextParams_0", "siblings_1", "item_1", "setParams", "t7", "t8", "id", "parentRefPath", "type", "template", "pathToString", "handleEditReference", "t9", "t10", "t11", "BackLink", "undefined", "t12", "t13", "t14", "opts", "_temp", "t15", "element", "options", "siblings_3", "item_3", "duplicatedItem", "t16", "viewId", "restParams", "omit", "view", "t17", "hasGroupSiblings", "groupLength", "routerPanesState", "ChildLink", "ReferenceChildLink", "ParameterizedLink", "replaceCurrent", "closeCurrent", "closeCurrentAndAfter", "duplicateCurrent", "setView", "ctx", "t18", "siblings_2", "item_2", "filter", "sibling", "PaneResolutionError", "Error", "constructor", "message", "context", "helpId", "cause", "name", "randomIdCache", "WeakMap", "assignId", "obj", "cachedValue", "get", "nanoid", "set", "isPromise", "thing", "then", "isSerializable", "isRecord", "serialize", "rethrowWithPaneResolutionErrors", "next", "unresolvedPane", "e", "wrapWithPublishReplay", "args", "pipe", "publishReplay", "refCount", "createPaneResolver", "middleware", "resolvePane", "isObservable", "from", "switchMap", "result", "observableOf", "bindCache", "memoBind", "methodKey", "boundMethods", "Map", "bound", "method", "bind", "resolveIntent", "resolvedPaneCache", "nextFn", "key", "path", "join", "cachedResolvedPane", "fallbackEditorPanes", "traverse", "currentId", "intent", "parent", "levelIndex", "structureContext", "targetId", "schemaTypeName", "otherParams", "resolvedPane", "firstValueFrom", "splitIndex", "map", "i", "depthIndex", "canHandleIntent", "pane", "child", "items", "Promise", "all", "nextLevelIndex", "resolve", "_id", "flat", "closestPaneToRoot", "rootPaneNode", "sort", "a", "b", "fallbackEditorChild", "nodeId", "replace", "resolveDocumentNode", "defaultDocumentBuilder", "schemaType", "documentId", "initialValueTemplate", "hashContext", "JSON", "stringify", "parentId", "serializeOptionsIndex", "serializeOptions", "serializeOptionsPath", "hashResolvedPaneMeta", "meta", "normalized", "routerPaneSibling", "paneNode", "resolvePaneTree", "flattenedRouterPanes", "current", "rest", "resolvedPaneMeta", "loadingPanes", "restIndex", "loadingPanePath", "_", "currentIndex", "nextStream", "startsWith", "concat", "nextResolvedPanes", "console", "warn", "generateHelpUrl", "createResolvedPaneNodeStream", "routerPanesStream", "initialCacheState", "cacheKeysByFlatIndex", "NEVER", "rawRouterPanes", "routerPanes", "flatMap", "routerPaneGroup", "startWith", "pairwise", "prev", "curr", "prevValue", "currValue", "isEqual", "diffIndex", "scan", "acc", "beforeDiffIndex", "afterDiffIndex", "keysToKeep", "Set", "keySet", "Array", "keysToDelete", "has", "delete", "cacheKeySet", "add", "nextPane", "prevPane", "distinctUntilChanged", "nextValue", "useRouterPanesStream", "routerStateSubject", "useState", "asObservable", "_temp2", "routerPanes$", "state", "useEffect", "_routerState", "ReplaySubject", "useResolvedPanes", "error", "setError", "useStructureTool", "Symbol", "for", "paneDataItems", "resolvedPanes", "data", "setData", "subscription", "_temp5", "subscribe", "unsubscribe", "reduce", "_temp3", "groupsLen", "itemId", "active", "childItemId", "LOADING_PANE", "selected", "_temp4", "pane_0", "ensureDocumentIdAndType", "documentStore", "uuid", "resolvedType", "resolveTypeForDocument", "EMPTY_RECORD", "IntentResolver", "memo", "maybeIntent", "useDocumentStore", "cancelled", "catch", "intentName", "PathSegment", "styled", "span", "formatStack", "stack", "RegExp", "window", "location", "host", "StructureError", "t", "useTranslation", "structureLocaleNamespace", "showStack", "SerializeError", "includes", "handleReload", "SyncIcon", "segment", "reload", "UnknownPane", "isSelected", "paneKey", "paneMap", "component", "lazy", "document", "documentList", "list", "StructureToolPane", "PaneComponent", "prevParams", "prevPayload", "keys", "Object", "NoDocumentTypesScreen", "DocumentTitle", "documentType", "editState", "useEditState", "schema", "useSchema", "isNewDocument", "published", "draft", "documentValue", "value", "isLoading", "previewValueIsLoading", "useValuePreview", "enabled", "documentTitle", "title", "settled", "ready", "newTitle", "useConstructDocumentTitle", "PassthroughTitle", "StructureTitle", "isLoadingPane", "isDocumentPane", "activeTitle", "structureToolBaseTitle", "StyledPaneLayout", "PaneLayout", "isSaveHotkey", "isHotkey", "StructureTool", "onPaneChange", "push", "pushToast", "useToast", "layoutCollapsed", "setLayoutCollapsed", "isResolvingIntent", "sanity", "useTheme", "media", "portalElement", "setPortalElement", "handleRootCollapse", "handleRootExpand", "handleGlobalKeyDown", "event", "preventDefault", "closable", "status", "duration", "addEventListener", "removeEventListener", "_original", "types", "some", "_isCustomDocumentTypeDefinition", "paneIndex", "paneParams", "StructureToolBoundary", "tool", "unstable_sources", "sources", "useWorkspace", "firstSource", "source", "defaultDocumentNode", "structure", "setActivePanes"]
}
